<div id="<%= dom_id session %>">
  <p>
    <strong>
      <%= link_to "#{session.id}: #{session.sport} in #{session.spot.name} (#{session.spot.id}) by #{session.user.name}", session %>
    </strong>
    <br>
    Visbility: <%= session.visibility %>
    <br>
    <%= time_tag session.when %><br>
    Joined by:
    <% unless session.users.empty? %>
      <% session.memberships.each do |member| %>
        <%= member.user.name %>
      <% end %>
    <% else %>
      no one yet
    <% end %>
  </p>
  <% if user_signed_in? %>
    <% if !is_owner_or_member?(session) %>
      <%= link_to "Join", memberships_path(session_id: session.id), data: { turbo_method: :post } %>
    <% elsif !is_owner?(session) %>
      <%= link_to "Leave", membership_path(current_membership(session)), data: { turbo_method: :delete } %>
    <% end %>
  <% end %>
</div>

